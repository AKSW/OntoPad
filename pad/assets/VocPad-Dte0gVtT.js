import{l as nt,n as C,r as A,o as p,c,k as O,g as R,d as P,s as Pt,w as j,F as z,e as E,a as r,v as N,x as $,y as kt,z as wt,A as H,p as Ct,j as Dt,B as U,C as It,t as B,D as zt,E as Et,G as Tt,_ as Zt,u as Nt,b as it,T as Lt,m as Bt,H as st,I as At,J as Ot,K as $t}from"./index-6Y48yreb.js";import{d as Rt}from"./n3-compare-C8Df7J5Y.js";var Vt=Object.defineProperty,Ut=(t,e,o)=>e in t?Vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,I=(t,e,o)=>(Ut(t,typeof e!="symbol"?e+"":e,o),o),qt=Object.defineProperty,Ht=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,Xt=Object.prototype.hasOwnProperty,Yt=Object.prototype.propertyIsEnumerable,lt=(t,e,o)=>e in t?qt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,Ft=(t,e)=>{for(var o in e||(e={}))Xt.call(e,o)&&lt(t,o,e[o]);if(rt)for(var o of rt(e))Yt.call(e,o)&&lt(t,o,e[o]);return t},Wt=(t,e)=>Ht(t,jt(e)),at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof nt<"u"?nt:typeof self<"u"?self:{},Gt=function(){var t="",e,o,n,i=[],s={passive:!0};window.addEventListener?(e="addEventListener",o="removeEventListener"):(e="attachEvent",o="detachEvent",t="on"),n="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function l(v,u){var y=function(g){!g&&(g=window.event);var S={originalEvent:g,target:g.target||g.srcElement,type:"wheel",deltaMode:g.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){g.preventDefault?g.preventDefault():g.returnValue=!1}};return n=="mousewheel"?(S.deltaY=-.025*g.wheelDelta,g.wheelDeltaX&&(S.deltaX=-.025*g.wheelDeltaX)):S.deltaY=g.detail,u(S)};return i.push({element:v,fn:y}),y}function d(v){for(var u=0;u<i.length;u++)if(i[u].element===v)return i[u].fn;return function(){}}function a(v){for(var u=0;u<i.length;u++)if(i[u].element===v)return i.splice(u,1)}function h(v,u,y,g){var S;n==="wheel"?S=y:S=l(v,y),v[e](t+u,S,g?s:!1)}function m(v,u,y,g){var S;n==="wheel"?S=y:S=d(v),v[o](t+u,S,g?s:!1),a(v)}function b(v,u,y){h(v,n,u,y),n=="DOMMouseScroll"&&h(v,"MozMousePixelScroll",u,y)}function w(v,u,y){m(v,n,u,y),n=="DOMMouseScroll"&&m(v,"MozMousePixelScroll",u,y)}return{on:b,off:w}}(),tt={extend:function(t,e){t=t||{};for(var o in e)this.isObject(e[o])?t[o]=this.extend(t[o],e[o]):t[o]=e[o];return t},isElement:function(t){return t instanceof HTMLElement||t instanceof SVGElement||t instanceof SVGSVGElement||t&&typeof t=="object"&&t!==null&&t.nodeType===1&&typeof t.nodeName=="string"},isObject:function(t){return Object.prototype.toString.call(t)==="[object Object]"},isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},getSvg:function(t){var e,o;if(this.isElement(t))e=t;else if(typeof t=="string"||t instanceof String){if(e=document.querySelector(t),!e)throw new Error("Provided selector did not find any elements. Selector: "+t)}else throw new Error("Provided selector is not an HTML object nor String");if(e.tagName.toLowerCase()==="svg")o=e;else if(e.tagName.toLowerCase()==="object")o=e.contentDocument.documentElement;else if(e.tagName.toLowerCase()==="embed")o=e.getSVGDocument().documentElement;else throw e.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return o},proxy:function(t,e){return function(){return t.apply(e,arguments)}},getType:function(t){return Object.prototype.toString.apply(t).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(t,e){if(t.clientX===void 0||t.clientX===null)if(t.clientX=0,t.clientY=0,t.touches!==void 0&&t.touches.length){if(t.touches[0].clientX!==void 0)t.clientX=t.touches[0].clientX,t.clientY=t.touches[0].clientY;else if(t.touches[0].pageX!==void 0){var o=e.getBoundingClientRect();t.clientX=t.touches[0].pageX-o.left,t.clientY=t.touches[0].pageY-o.top}}else t.originalEvent!==void 0&&t.originalEvent.clientX!==void 0&&(t.clientX=t.originalEvent.clientX,t.clientY=t.originalEvent.clientY)},isDblClick:function(t,e){if(t.detail===2)return!0;if(e!=null){var o=t.timeStamp-e.timeStamp,n=Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2));return o<250&&n<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(t,e,o){var n=this,i,s,l,d=null,a=0;o||(o={});var h=function(){a=o.leading===!1?0:n.now(),d=null,l=t.apply(i,s),d||(i=s=null)};return function(){var m=n.now();!a&&o.leading===!1&&(a=m);var b=e-(m-a);return i=this,s=arguments,b<=0||b>e?(clearTimeout(d),d=null,a=m,l=t.apply(i,s),d||(i=s=null)):!d&&o.trailing!==!1&&(d=setTimeout(h,b)),l}},createRequestAnimationFrame:function(t){var e=null;return t!=="auto"&&t<60&&t>1&&(e=Math.floor(1e3/t)),e===null?window.requestAnimationFrame||dt(33):dt(e)}};function dt(t){return function(e){window.setTimeout(e,t)}}var K=tt,bt="unknown";document.documentMode&&(bt="ie");var et={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(t){if(t.clientWidth&&t.clientHeight)return{width:t.clientWidth,height:t.clientHeight};if(t.getBoundingClientRect())return t.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(t,e){var o=null;if(K.isElement(e)?o=e:o=t.querySelector(e),!o){var n=Array.prototype.slice.call(t.childNodes||t.children).filter(function(a){return a.nodeName!=="defs"&&a.nodeName!=="#text"});n.length===1&&n[0].nodeName==="g"&&n[0].getAttribute("transform")===null&&(o=n[0])}if(!o){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");o=document.createElementNS(this.svgNS,"g"),o.setAttribute("id",i);var s=t.childNodes||t.children;if(s&&s.length>0)for(var l=s.length;l>0;l--)s[s.length-l].nodeName!=="defs"&&o.appendChild(s[s.length-l]);t.appendChild(o)}var d=[];return o.getAttribute("class")&&(d=o.getAttribute("class").split(" ")),~d.indexOf("svg-pan-zoom_viewport")||(d.push("svg-pan-zoom_viewport"),o.setAttribute("class",d.join(" "))),o},setupSvgAttributes:function(t){if(t.setAttribute("xmlns",this.svgNS),t.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),t.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),t.parentNode!==null){var e=t.getAttribute("style")||"";e.toLowerCase().indexOf("overflow")===-1&&t.setAttribute("style","overflow: hidden; "+e)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:K.throttle(function(){for(var t=document.querySelectorAll("defs"),e=t.length,o=0;o<e;o++){var n=t[o];n.parentNode.insertBefore(n,n)}},at?at.internetExplorerRedisplayInterval:null),setCTM:function(t,e,o){var n=this,i="matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")";t.setAttributeNS(null,"transform",i),"transform"in t.style?t.style.transform=i:"-ms-transform"in t.style?t.style["-ms-transform"]=i:"-webkit-transform"in t.style&&(t.style["-webkit-transform"]=i),bt==="ie"&&o&&(o.parentNode.insertBefore(o,o),window.setTimeout(function(){n.refreshDefsGlobal()},n.internetExplorerRedisplayInterval))},getEventPoint:function(t,e){var o=e.createSVGPoint();return K.mouseAndTouchNormalize(t,e),o.x=t.clientX,o.y=t.clientY,o},getSvgCenterPoint:function(t,e,o){return this.createSVGPoint(t,e/2,o/2)},createSVGPoint:function(t,e,o){var n=t.createSVGPoint();return n.x=e,n.y=o,n}},k=et,Kt={enable:function(t){var e=t.svg.querySelector("defs");e||(e=document.createElementNS(k.svgNS,"defs"),t.svg.appendChild(e));var o=e.querySelector("style#svg-pan-zoom-controls-styles");if(!o){var n=document.createElementNS(k.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",e.appendChild(n)}var i=document.createElementNS(k.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(t.width-70)+" "+(t.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(t)),i.appendChild(this._createZoomReset(t)),i.appendChild(this._createZoomOut(t)),t.svg.appendChild(i),t.controlIcons=i},_createZoomIn:function(t){var e=document.createElementNS(k.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-in"),e.setAttribute("transform","translate(30.5 5) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomIn()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomIn()},!1);var o=document.createElementNS(k.svgNS,"rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width","1500"),o.setAttribute("height","1400"),o.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(o);var n=document.createElementNS(k.svgNS,"path");return n.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n),e},_createZoomReset:function(t){var e=document.createElementNS(k.svgNS,"g");e.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),e.setAttribute("transform","translate(5 35) scale(0.4)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().reset()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().reset()},!1);var o=document.createElementNS(k.svgNS,"rect");o.setAttribute("x","2"),o.setAttribute("y","2"),o.setAttribute("width","182"),o.setAttribute("height","58"),o.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(o);var n=document.createElementNS(k.svgNS,"path");n.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n);var i=document.createElementNS(k.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(i),e},_createZoomOut:function(t){var e=document.createElementNS(k.svgNS,"g");e.setAttribute("id","svg-pan-zoom-zoom-out"),e.setAttribute("transform","translate(30.5 70) scale(0.015)"),e.setAttribute("class","svg-pan-zoom-control"),e.addEventListener("click",function(){t.getPublicInstance().zoomOut()},!1),e.addEventListener("touchstart",function(){t.getPublicInstance().zoomOut()},!1);var o=document.createElementNS(k.svgNS,"rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width","1500"),o.setAttribute("height","1400"),o.setAttribute("class","svg-pan-zoom-control-background"),e.appendChild(o);var n=document.createElementNS(k.svgNS,"path");return n.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),n.setAttribute("class","svg-pan-zoom-control-element"),e.appendChild(n),e},disable:function(t){t.controlIcons&&(t.controlIcons.parentNode.removeChild(t.controlIcons),t.controlIcons=null)}},Qt=et,q=tt,M=function(t,e){this.init(t,e)};M.prototype.init=function(t,e){this.viewport=t,this.options=e,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=q.proxy(this.updateCTM,this),this.requestAnimationFrame=q.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var o=this.processCTM();this.setCTM(o),this.updateCTM()};M.prototype.cacheViewBox=function(){var t=this.options.svg.getAttribute("viewBox");if(t){var e=t.split(/[\s\,]/).filter(function(n){return n}).map(parseFloat);this.viewBox.x=e[0],this.viewBox.y=e[1],this.viewBox.width=e[2],this.viewBox.height=e[3];var o=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=o,this.activeState.x=(this.options.width-this.viewBox.width*o)/2,this.activeState.y=(this.options.height-this.viewBox.height*o)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};M.prototype.simpleViewBoxCache=function(){var t=this.viewport.getBBox();this.viewBox.x=t.x,this.viewBox.y=t.y,this.viewBox.width=t.width,this.viewBox.height=t.height};M.prototype.getViewBox=function(){return q.extend({},this.viewBox)};M.prototype.processCTM=function(){var t=this.getCTM();if(this.options.fit||this.options.contain){var e;this.options.fit?e=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):e=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=e,t.d=e,t.e=-this.viewBox.x*e,t.f=-this.viewBox.y*e}if(this.options.center){var o=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*t.a)*.5,n=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*t.a)*.5;t.e=o,t.f=n}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t};M.prototype.getOriginalState=function(){return q.extend({},this.originalState)};M.prototype.getState=function(){return q.extend({},this.activeState)};M.prototype.getZoom=function(){return this.activeState.zoom};M.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};M.prototype.computeRelativeZoom=function(t){return t/this.originalState.zoom};M.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};M.prototype.getCTM=function(){var t=this.options.svg.createSVGMatrix();return t.a=this.activeState.zoom,t.b=0,t.c=0,t.d=this.activeState.zoom,t.e=this.activeState.x,t.f=this.activeState.y,t};M.prototype.setCTM=function(t){var e=this.isZoomDifferent(t),o=this.isPanDifferent(t);if(e||o){if(e&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(t.a))===!1?(t.a=t.d=this.activeState.zoom,e=!1):(this.updateCache(t),this.options.onZoom(this.getRelativeZoom()))),o){var n=this.options.beforePan(this.getPan(),{x:t.e,y:t.f}),i=!1,s=!1;n===!1?(t.e=this.getPan().x,t.f=this.getPan().y,i=s=!0):q.isObject(n)&&(n.x===!1?(t.e=this.getPan().x,i=!0):q.isNumber(n.x)&&(t.e=n.x),n.y===!1?(t.f=this.getPan().y,s=!0):q.isNumber(n.y)&&(t.f=n.y)),i&&s||!this.isPanDifferent(t)?o=!1:(this.updateCache(t),this.options.onPan(this.getPan()))}(e||o)&&this.updateCTMOnNextFrame()}};M.prototype.isZoomDifferent=function(t){return this.activeState.zoom!==t.a};M.prototype.isPanDifferent=function(t){return this.activeState.x!==t.e||this.activeState.y!==t.f};M.prototype.updateCache=function(t){this.activeState.zoom=t.a,this.activeState.x=t.e,this.activeState.y=t.f};M.prototype.pendingUpdate=!1;M.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};M.prototype.updateCTM=function(){var t=this.getCTM();Qt.setCTM(this.viewport,t,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(t)};var Jt=function(t,e){return new M(t,e)},xt=Gt,J=Kt,T=tt,L=et,te=Jt,f=function(t,e){this.init(t,e)},ee={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},St={passive:!0};f.prototype.init=function(t,e){var o=this;this.svg=t,this.defs=t.querySelector("defs"),L.setupSvgAttributes(this.svg),this.options=T.extend(T.extend({},ee),e),this.state="none";var n=L.getBoundingClientRectNormalized(t);this.width=n.width,this.height=n.height,this.viewport=te(L.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,l){if(o.viewport&&o.options.beforeZoom)return o.options.beforeZoom(s,l)},onZoom:function(s){if(o.viewport&&o.options.onZoom)return o.options.onZoom(s)},beforePan:function(s,l){if(o.viewport&&o.options.beforePan)return o.options.beforePan(s,l)},onPan:function(s){if(o.viewport&&o.options.onPan)return o.options.onPan(s)},onUpdatedCTM:function(s){if(o.viewport&&o.options.onUpdatedCTM)return o.options.onUpdatedCTM(s)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&J.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};f.prototype.setupHandlers=function(){var t=this,e=null;if(this.eventListeners={mousedown:function(s){var l=t.handleMouseDown(s,e);return e=s,l},touchstart:function(s){var l=t.handleMouseDown(s,e);return e=s,l},mouseup:function(s){return t.handleMouseUp(s)},touchend:function(s){return t.handleMouseUp(s)},mousemove:function(s){return t.handleMouseMove(s)},touchmove:function(s){return t.handleMouseMove(s)},mouseleave:function(s){return t.handleMouseUp(s)},touchleave:function(s){return t.handleMouseUp(s)},touchcancel:function(s){return t.handleMouseUp(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var o=this.options.customEventsHandler.haltEventListeners;if(o&&o.length)for(var n=o.length-1;n>=0;n--)this.eventListeners.hasOwnProperty(o[n])&&delete this.eventListeners[o[n]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?!1:St);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};f.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var t=this;this.wheelListener=function(o){return t.handleMouseWheel(o)};var e=!this.options.preventMouseEventsDefault;xt.on(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!0}};f.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var t=!this.options.preventMouseEventsDefault;xt.off(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!1}};f.prototype.handleMouseWheel=function(t){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1);var e=t.deltaY||1,o=Date.now()-this.lastMouseWheelEventTime,n=3+Math.max(0,30-o);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in t&&t.deltaMode===0&&t.wheelDelta&&(e=t.deltaY===0?0:Math.abs(t.wheelDelta)/t.deltaY),e=-.3<e&&e<.3?e:(e>0?1:-1)*Math.log(Math.abs(e)+10)/n;var i=this.svg.getScreenCTM().inverse(),s=L.getEventPoint(t,this.svg).matrixTransform(i),l=Math.pow(1+this.options.zoomScaleSensitivity,-1*e);this.zoomAtPoint(l,s)}};f.prototype.zoomAtPoint=function(t,e,o){var n=this.viewport.getOriginalState();o?(t=Math.max(this.options.minZoom*n.zoom,Math.min(this.options.maxZoom*n.zoom,t)),t=t/this.getZoom()):this.getZoom()*t<this.options.minZoom*n.zoom?t=this.options.minZoom*n.zoom/this.getZoom():this.getZoom()*t>this.options.maxZoom*n.zoom&&(t=this.options.maxZoom*n.zoom/this.getZoom());var i=this.viewport.getCTM(),s=e.matrixTransform(i.inverse()),l=this.svg.createSVGMatrix().translate(s.x,s.y).scale(t).translate(-s.x,-s.y),d=i.multiply(l);d.a!==i.a&&this.viewport.setCTM(d)};f.prototype.zoom=function(t,e){this.zoomAtPoint(t,L.getSvgCenterPoint(this.svg,this.width,this.height),e)};f.prototype.publicZoom=function(t,e){e&&(t=this.computeFromRelativeZoom(t)),this.zoom(t,e)};f.prototype.publicZoomAtPoint=function(t,e,o){if(o&&(t=this.computeFromRelativeZoom(t)),T.getType(e)!=="SVGPoint")if("x"in e&&"y"in e)e=L.createSVGPoint(this.svg,e.x,e.y);else throw new Error("Given point is invalid");this.zoomAtPoint(t,e,o)};f.prototype.getZoom=function(){return this.viewport.getZoom()};f.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};f.prototype.computeFromRelativeZoom=function(t){return t*this.viewport.getOriginalState().zoom};f.prototype.resetZoom=function(){var t=this.viewport.getOriginalState();this.zoom(t.zoom,!0)};f.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};f.prototype.reset=function(){this.resetZoom(),this.resetPan()};f.prototype.handleDblClick=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.options.controlIconsEnabled){var e=t.target.getAttribute("class")||"";if(e.indexOf("svg-pan-zoom-control")>-1)return!1}var o;t.shiftKey?o=1/((1+this.options.zoomScaleSensitivity)*2):o=(1+this.options.zoomScaleSensitivity)*2;var n=L.getEventPoint(t,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(o,n)};f.prototype.handleMouseDown=function(t,e){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),T.mouseAndTouchNormalize(t,this.svg),this.options.dblClickZoomEnabled&&T.isDblClick(t,e)?this.handleDblClick(t):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=L.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()))};f.prototype.handleMouseMove=function(t){if(this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var e=L.getEventPoint(t,this.svg).matrixTransform(this.firstEventCTM.inverse()),o=this.firstEventCTM.translate(e.x-this.stateOrigin.x,e.y-this.stateOrigin.y);this.viewport.setCTM(o)}};f.prototype.handleMouseUp=function(t){this.options.preventMouseEventsDefault&&(t.preventDefault?t.preventDefault():t.returnValue=!1),this.state==="pan"&&(this.state="none")};f.prototype.fit=function(){var t=this.viewport.getViewBox(),e=Math.min(this.width/t.width,this.height/t.height);this.zoom(e,!0)};f.prototype.contain=function(){var t=this.viewport.getViewBox(),e=Math.max(this.width/t.width,this.height/t.height);this.zoom(e,!0)};f.prototype.center=function(){var t=this.viewport.getViewBox(),e=(this.width-(t.width+t.x*2)*this.getZoom())*.5,o=(this.height-(t.height+t.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:e,y:o})};f.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};f.prototype.pan=function(t){var e=this.viewport.getCTM();e.e=t.x,e.f=t.y,this.viewport.setCTM(e)};f.prototype.panBy=function(t){var e=this.viewport.getCTM();e.e+=t.x,e.f+=t.y,this.viewport.setCTM(e)};f.prototype.getPan=function(){var t=this.viewport.getState();return{x:t.x,y:t.y}};f.prototype.resize=function(){var t=L.getBoundingClientRectNormalized(this.svg);this.width=t.width,this.height=t.height;var e=this.viewport;e.options.width=this.width,e.options.height=this.height,e.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};f.prototype.destroy=function(){var t=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var e in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(e,this.eventListeners[e],this.options.preventMouseEventsDefault?!1:St);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),V=V.filter(function(o){return o.svg!==t.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};f.prototype.getPublicInstance=function(){var t=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return t.options.panEnabled=!0,t.pi},disablePan:function(){return t.options.panEnabled=!1,t.pi},isPanEnabled:function(){return!!t.options.panEnabled},pan:function(e){return t.pan(e),t.pi},panBy:function(e){return t.panBy(e),t.pi},getPan:function(){return t.getPan()},setBeforePan:function(e){return t.options.beforePan=e===null?null:T.proxy(e,t.publicInstance),t.pi},setOnPan:function(e){return t.options.onPan=e===null?null:T.proxy(e,t.publicInstance),t.pi},enableZoom:function(){return t.options.zoomEnabled=!0,t.pi},disableZoom:function(){return t.options.zoomEnabled=!1,t.pi},isZoomEnabled:function(){return!!t.options.zoomEnabled},enableControlIcons:function(){return t.options.controlIconsEnabled||(t.options.controlIconsEnabled=!0,J.enable(t)),t.pi},disableControlIcons:function(){return t.options.controlIconsEnabled&&(t.options.controlIconsEnabled=!1,J.disable(t)),t.pi},isControlIconsEnabled:function(){return!!t.options.controlIconsEnabled},enableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!0,t.pi},disableDblClickZoom:function(){return t.options.dblClickZoomEnabled=!1,t.pi},isDblClickZoomEnabled:function(){return!!t.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return t.enableMouseWheelZoom(),t.pi},disableMouseWheelZoom:function(){return t.disableMouseWheelZoom(),t.pi},isMouseWheelZoomEnabled:function(){return!!t.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(e){return t.options.zoomScaleSensitivity=e,t.pi},setMinZoom:function(e){return t.options.minZoom=e,t.pi},setMaxZoom:function(e){return t.options.maxZoom=e,t.pi},setBeforeZoom:function(e){return t.options.beforeZoom=e===null?null:T.proxy(e,t.publicInstance),t.pi},setOnZoom:function(e){return t.options.onZoom=e===null?null:T.proxy(e,t.publicInstance),t.pi},zoom:function(e){return t.publicZoom(e,!0),t.pi},zoomBy:function(e){return t.publicZoom(e,!1),t.pi},zoomAtPoint:function(e,o){return t.publicZoomAtPoint(e,o,!0),t.pi},zoomAtPointBy:function(e,o){return t.publicZoomAtPoint(e,o,!1),t.pi},zoomIn:function(){return this.zoomBy(1+t.options.zoomScaleSensitivity),t.pi},zoomOut:function(){return this.zoomBy(1/(1+t.options.zoomScaleSensitivity)),t.pi},getZoom:function(){return t.getRelativeZoom()},setOnUpdatedCTM:function(e){return t.options.onUpdatedCTM=e===null?null:T.proxy(e,t.publicInstance),t.pi},resetZoom:function(){return t.resetZoom(),t.pi},resetPan:function(){return t.resetPan(),t.pi},reset:function(){return t.reset(),t.pi},fit:function(){return t.fit(),t.pi},contain:function(){return t.contain(),t.pi},center:function(){return t.center(),t.pi},updateBBox:function(){return t.updateBBox(),t.pi},resize:function(){return t.resize(),t.pi},getSizes:function(){return{width:t.width,height:t.height,realZoom:t.getZoom(),viewBox:t.viewport.getViewBox()}},destroy:function(){return t.destroy(),t.pi}}),this.publicInstance};var V=[],oe=function(t,e){var o=T.getSvg(t);if(o===null)return null;for(var n=V.length-1;n>=0;n--)if(V[n].svg===o)return V[n].instance.getPublicInstance();return V.push({svg:o,instance:new f(o,e)}),V[V.length-1].instance.getPublicInstance()},ne=oe,Mt=(t,e)=>{const o=t.__vccOpts||t;for(const[n,i]of e)o[n]=i;return o};const ie=["x","y","width","height"],se=C({__name:"Scope",props:{mainSPZ:null,thumbnailSPZ:null},setup(t){const e=t,o=$(0),n=$(0),i=$(0),s=$(0),l=$(null),d=()=>{if(!e.mainSPZ||!e.thumbnailSPZ)return;const h=e.mainSPZ.getPan().x,m=e.mainSPZ.getPan().y,b=e.mainSPZ.getSizes().width,w=e.mainSPZ.getSizes().height,v=e.mainSPZ.getSizes().realZoom,u=e.thumbnailSPZ.getPan().x,y=e.thumbnailSPZ.getPan().y,g=e.thumbnailSPZ.getSizes().realZoom/v,S=u-h*g,X=y-m*g,W=b*g,G=w*g;o.value=S+1,n.value=X+1,i.value=W-2,s.value=G-2},a=h=>{if(h.which==0&&h.button==0||!l.value)return;let m=e.mainSPZ,b=e.thumbnailSPZ,w=l.value.getBoundingClientRect();m.getSizes().width,m.getSizes().height;let v=m.getSizes().realZoom,u=b.getSizes().width,y=b.getSizes().height,g=b.getSizes().realZoom;var S=h.clientX-w.left-u/2,X=h.clientY-w.top-y/2,W=-S*v/g,G=-X*v/g;m.pan({x:W,y:G})};return wt(()=>{d(),e.mainSPZ.setOnPan(()=>d()),e.mainSPZ.setOnZoom(()=>d())}),(h,m)=>(p(),c("svg",{class:"svg-pan-zoom__scope",onClick:a,onMousemove:a,ref_key:"scopeSVG",ref:l},[r("rect",{class:"scope",x:o.value,y:n.value,width:i.value,height:s.value},null,8,ie)],544))}});var re=Mt(se,[["__scopeId","data-v-169415fd"]]);const le=C({__name:"SvgPanZoomThumbnail",props:{mainSPZ:null},emits:["thumbnailCreated"],setup(t,{emit:e}){const o=t,n=$(null),i=l=>{o.mainSPZ[l.deltaY<0?"zoomIn":"zoomOut"]()},s=l=>{n.value=l,e("thumbnailCreated",l)};return(l,d)=>(p(),c("div",{class:"svg-pan-zoom__thumbnail",onWheel:i},[P(_t,{class:"thumbnail",zoomEnabled:!1,panEnabled:!1,controlIconsEnabled:!1,dblClickZoomEnabled:!1,preventMouseEventsDefault:!0,onCreated:s},{default:j(()=>[H(l.$slots,"default",{},void 0,!0)]),_:3}),n.value?(p(),O(re,{key:0,mainSPZ:t.mainSPZ,thumbnailSPZ:n.value},null,8,["mainSPZ","thumbnailSPZ"])):R("",!0)],32))}});var ae=Mt(le,[["__scopeId","data-v-093287c4"]]);const de={class:"svg-pan-zoom"},_t=C({__name:"SvgPanZoom",props:{viewportSelector:{type:[String,Object],default:".svg-pan-zoom"},panEnabled:{type:Boolean,default:!0},controlIconsEnabled:{type:Boolean,default:!1},zoomEnabled:{type:Boolean,default:!0},dblClickZoomEnabled:{type:Boolean,default:!0},mouseWheelZoomEnabled:{type:Boolean,default:!0},preventMouseEventsDefault:{type:Boolean,default:!0},zoomScaleSensitivity:{type:Number,default:.2},minZoom:{type:Number,default:.5},maxZoom:{type:Number,default:10},fit:{type:Boolean,default:!0},contain:{type:Boolean,default:!0},center:{type:Boolean,default:!0},refreshRate:{type:[Number,String],default:"auto"}},emits:["beforeZoom","onZoom","beforePan","onPan","onUpdatedCTM","created","thumbnailCreated"],setup(t,{emit:e}){const o=t,n=$(null),i=kt(),s=$({});Object.keys(o).filter(a=>o[a]!==void 0).forEach(a=>{s.value=Wt(Ft({},s.value),{[a]:o[a]})});const l=$(null),d=a=>{if(a&&a.tagName==="svg")return a;const h=Array.from(a.children);if(!h)return!1;for(const m of h){const b=d(m);if(b)return b}return!1};return wt(()=>{if(s.value.onZoom=h=>e("onZoom",h),s.value.onPan=h=>e("onPan",h),!(i.default&&n.value))return;const a=d(n.value);a&&(l.value=ne(a,s.value),e("created",l.value))}),(a,h)=>(p(),c("div",de,[r("div",{class:"svg-pan-zoom__default",ref_key:"defaultSlot",ref:n},[H(a.$slots,"default")],512),a.$slots.thumbnail&&l.value?(p(),O(ae,{key:0,onThumbnailCreated:h[0]||(h[0]=m=>a.$emit("thumbnailCreated",m)),mainSPZ:l.value},{default:j(()=>[H(a.$slots,"thumbnail")]),_:3},8,["mainSPZ"])):R("",!0)]))}}),he=C({data(){return{onContextMenu:t=>{t.preventDefault()},onMouseDown:t=>{const e=this,o=t==null?void 0:t.target.closest(".diagram-context-menu"),n=t==null?void 0:t.target.closest(".has-menu");this.menuX=t.pageX,this.menuY=t.pageY,o?(t.stopPropagation(),this.menuItemClick(t,this.showMenuComponent),e.showMenuComponent=void 0):n&&t.button===2?(this.showMenuComponent=n.vueComponent,t.stopPropagation()):e.showMenuComponent=void 0},menuX:0,menuY:0,showMenuComponent:void 0}},mounted(){this.$parent.$el.addEventListener("mousedown",this.onMouseDown,{capture:!0}),this.$parent.$el.addEventListener("contextmenu",this.onContextMenu)},beforeUnmount(){this.$parent.$el.removeEventListener("mousedown",this.onMouseDown),this.$parent.$el.addEventListener("contextmenu",this.onContextMenu)},methods:{menuItemClick(t,e){var o;const n=(o=t==null?void 0:t.target)==null?void 0:o.dataset;n!=null&&n.childItemKey?e.menu[n.menuItemKey].children[n.childItemKey].handler.call(e):e.menu[n.menuItemKey].handler.call(e)}}}),Z=(t,e)=>{const o=t.__vccOpts||t;for(const[n,i]of e)o[n]=i;return o},ue=["data-menu-item-key"],pe={key:0,style:{float:"right"}},ce={key:1,class:"menu-item-children-container"},me=["data-menu-item-key","data-child-item-key"];function ge(t,e,o,n,i,s){return p(),c("div",null,[t.showMenuComponent?(p(),c("div",{key:0,class:U("menu diagram-context-menu"),style:N(`left: ${t.menuX}px; top: ${t.menuY}px`)},[(p(!0),c(z,null,E(t.showMenuComponent.menu,(l,d)=>(p(),c("div",{key:d,class:U(`menu-item ${l.classes?l.classes.join(" "):""}`),"data-menu-item-key":d},[It(B(l.label)+" ",1),l.children?(p(),c("span",pe," > ")):R("",!0),l.children?(p(),c("div",ce,[(p(!0),c(z,null,E(l.children,(a,h)=>(p(),c("div",{key:h,class:U(`menu-item child-menu-item ${a.classes?a.classes.join(" "):""}`),"data-menu-item-key":d,"data-child-item-key":h},B(a.label),11,me))),128))])):R("",!0)],10,ue))),128))],4)):R("",!0)])}const ve=Z(he,[["render",ge],["__scopeId","data-v-f5726dff"]]),fe=C({data(){return{style:"display: none;",object:void 0,property:"",element:void 0}},computed:{value:{get(){if(this.object)return this.object[this.property]},set(t){this.object&&(this.object[this.property]=t,this.computeStyle())}}},watch:{element(t,e){e&&e.classList.remove("opacity-0"),t&&t.classList.add("opacity-0")}},methods:{computeStyle(){this.element?this.style=`
          top: ${this.element.getBoundingClientRect().top}px;
          left: ${this.element.getBoundingClientRect().left}px;
          width: ${this.element.getBoundingClientRect().width}px;
          height: ${this.element.getBoundingClientRect().height}px;
        `:this.style="display: none;"},editText(t,e,o){this.object=t,this.property=e,this.element=o,this.computeStyle()}}});function ye(t,e,o,n,i,s){return zt((p(),c("input",{type:"text",class:"text-input",style:N(t.style),"onUpdate:modelValue":e[0]||(e[0]=l=>t.value=l)},null,4)),[[Et,t.value]])}const we=Z(fe,[["render",ye],["__scopeId","data-v-d2660cae"]]);var ht=function(){return Math.trunc(Math.random()*1e3)};const ut={};let be=class{constructor(t,e,o,n,i,s,l,d){I(this,"id"),I(this,"title"),I(this,"diagram"),I(this,"x"),I(this,"y"),I(this,"width"),I(this,"height"),I(this,"options"),I(this,"ports"),ut[e]=t,this.id=e,this.title=o,this.diagram=t,this.x=n,this.y=i,this.width=s||72,this.height=l||100,this.options=d||{},this.ports=[]}addInPort(t,e){let o={id:ht(),type:"in",name:t,options:e};return this.ports.push(o),o.id}addOutPort(t,e){let o={id:ht(),type:"out",name:t,options:e};return this.ports.push(o),o.id}removePortLinks(t){for(let e of ut[t]._model.links)(e.from===t||e.to===t)&&this.diagram.deleteLink(e)}deletePort(t){this.removePortLinks(t),this.ports=this.ports.filter(e=>e.id!==t)}};var pt=function(){return Math.trunc(Math.random()*1e3)};class xe{constructor(){I(this,"_model"),this._model={nodes:[],links:[]}}addNode(e,o,n,i,s,l){l===void 0&&(l={});const d=new be(this,pt(),e,o,n,i,s,l);return this._model.nodes.push(d),d}deleteNode(e){const o=this._model.nodes.indexOf(e);for(let n=0;n<this._model.links.length;n++){const i=this._model.links[n];for(let s=0;s<e.ports.length;s++){const l=e.ports[s];(i.from===l.id||i.to===l.id)&&(this.deleteLink(i),n--)}}this._model.nodes.splice(o,1)}deleteLink(e){const o=this._model.links.indexOf(e);this._model.links.splice(o,1)}addLink(e,o,n=[],i={}){this._model.links.push({id:pt(),from:e,to:o,positionFrom:{},positionTo:{},points:n,options:i})}serialize(){}deserialize(e){this._model=JSON.parse(e)}}const ct=["nw","n","ne","e","se","s","sw","w"];class Se{constructor(e,o,n,i){I(this,"container"),I(this,"startDragHandler");var s;this.container=e,e.innerHTML=`
      <rect class="resize-handle edge" data-direction="nw" x="-2" y="-5" width="5" height="5" />
      <rect class="resize-handle" data-direction="n" x="0" y="-3" height="3" />
      <rect class="resize-handle edge" data-direction="ne" y="-5" width="5" height="5" />
      <rect class="resize-handle" data-direction="e" y="0" width="3" />
      <rect class="resize-handle edge" data-direction="se" width="5" height="5" />
      <rect class="resize-handle" data-direction="s" x="0" height="3" />
      <rect class="resize-handle edge" data-direction="sw" x="-2" width="5" height="5" />
      <rect class="resize-handle" data-direction="w" x="-2" y="0" width="3" />
    `,this.startDragHandler=i,this.mouseDownHandler=this.mouseDownHandler.bind(this);for(let l of ct)(s=e.querySelector(`[data-direction="${l}"]`))==null||s.addEventListener("mousedown",this.mouseDownHandler);this.updatePosition(o,n)}updatePosition(e,o){const n=this.container.querySelector('[data-direction="n"]'),i=this.container.querySelector('[data-direction="ne"]'),s=this.container.querySelector('[data-direction="e"]'),l=this.container.querySelector('[data-direction="se"]'),d=this.container.querySelector('[data-direction="s"]'),a=this.container.querySelector('[data-direction="sw"]'),h=this.container.querySelector('[data-direction="w"]');n==null||n.setAttribute("width",e.toString()),i==null||i.setAttribute("x",e.toString()),s==null||s.setAttribute("x",e.toString()),s==null||s.setAttribute("height",o.toString()),l==null||l.setAttribute("x",e.toString()),l==null||l.setAttribute("y",o.toString()),d==null||d.setAttribute("y",o.toString()),d==null||d.setAttribute("width",e.toString()),a==null||a.setAttribute("y",o.toString()),h==null||h.setAttribute("height",o.toString())}unmount(){var e;if(this.startDragHandler)for(let o of ct)(e=this.container.querySelector(`[data-direction="${o}"]`))==null||e.removeEventListener("mousedown",this.mouseDownHandler);this.container.innerHTML=""}mouseDownHandler(e){if(console.log("mouseDownHandler"),e.target){const o=e.target;o==null||o.closest(".resize-handle"),this.startDragHandler&&this.startDragHandler(o.dataset.direction)}}}const Me={props:{nodeModel:{type:Object}},computed:{options(){var t;return((t=this.nodeModel)==null?void 0:t.options)||{}},parentDiagram(){var t,e;return(e=(t=this.$parent)==null?void 0:t.$parent)==null?void 0:e.$parent}}},_e=["x","y","width"],Pe={class:"prevent-node-drag"};function ke(t,e,o,n,i,s){var l,d,a,h;return p(),c("g",null,[r("text",{class:U(s.options.editableTitle?"title-editable":""),x:((l=o.nodeModel)==null?void 0:l.width)||0/2,y:((d=o.nodeModel)==null?void 0:d.height)||0/2,width:(a=o.nodeModel)==null?void 0:a.width,ref:"title","text-anchor":"middle","font-size":"14","font-weight":"bold",fill:"#000000",style:N(s.options.titleStyle||""),onClick:e[0]||(e[0]=m=>{var b;return s.options.editableTitle?(b=s.parentDiagram)==null?void 0:b.editText(o.nodeModel,"title",t.$refs.title):void 0})},B((h=o.nodeModel)==null?void 0:h.title),15,_e),r("g",Pe,[H(t.$slots,"default")])])}const Ce=Z(Me,[["render",ke]]),De=C({props:{nodeModel:{type:Object,required:!0},selected:{type:Boolean,default:!1}},data(){let t;return this.nodeModel.options.editableTitle&&(t=[{label:"icone",children:types.map(e=>({label:e.label,handler(){this.nodeModel.options.icon=e.icon}}))}]),{menu:t}}}),Ie=["width","height"],ze=r("rect",{fill:"#ddd",x:"1",y:"1",width:"32",height:"32"},null,-1),Ee={transform:"translate(5, 5)"},Te=["d"],Ze={class:"prevent-node-drag"};function Ne(t,e,o,n,i,s){return p(),c("g",null,[r("rect",{fill:"#ffffff",stroke:"#333","stroke-width":"1",x:"0",y:"0",width:t.nodeModel.width,height:t.nodeModel.height},null,8,Ie),ze,r("g",Ee,[r("path",{d:t.nodeModel.iconPath},null,8,Te)]),r("text",{x:37,y:21,class:U(t.nodeModel.options.editableTitle?"title-editable":""),"font-size":"14","font-weight":"bold",fill:"#000000",ref:"title",onClick:e[0]||(e[0]=l=>t.nodeModel.options.editableTitle?t.$parent.$parent.$parent.editText(t.nodeModel,"title",t.$refs.title):void 0)},B(t.nodeModel.title),3),r("g",Ze,[H(t.$slots,"default")])])}const Le=Z(De,[["render",Ne]]),Be=C({props:{nodeModel:{type:Object}},computed:{options(){var t;return((t=this.nodeModel)==null?void 0:t.options)||{}},parentDiagram(){var t,e;return(e=(t=this.$parent)==null?void 0:t.$parent)==null?void 0:e.$parent}}}),Ae=["href","width","height"],Oe=["x","y","width"],$e={class:"prevent-node-drag"};function Re(t,e,o,n,i,s){var l,d,a,h,m,b;return p(),c("g",null,[r("image",{href:t.options.image,x:"5",width:((l=t.nodeModel)==null?void 0:l.width)-10,height:(d=t.nodeModel)==null?void 0:d.height},null,8,Ae),r("text",{class:U(t.options.editableTitle?"title-editable":""),x:((a=t.nodeModel)==null?void 0:a.width)/2,y:((h=t.nodeModel)==null?void 0:h.height)+14,width:(m=t.nodeModel)==null?void 0:m.width,ref:"title","text-anchor":"middle","font-size":"14","font-weight":"bold",fill:"#000000",style:N(t.options.titleStyle||""),onClick:e[0]||(e[0]=w=>t.options.editableTitle?t.parentDiagram.editText(t.nodeModel,"title",t.$refs.title):void 0)},B((b=t.nodeModel)==null?void 0:b.title),15,Oe),r("g",$e,[H(t.$slots,"default")])])}const Ve=Z(Be,[["render",Re]]),Ue=C({props:{nodeModel:{type:Object},selected:{type:Boolean,default:!1}},data(){return{titleFillOpacity:.25}},computed:{options(){var t;return((t=this.nodeModel)==null?void 0:t.options)||{}},color(){var t;return((t=this.nodeModel)==null?void 0:t.color)||"#66cc00"},parentDiagram(){var t,e;return(e=(t=this.$parent)==null?void 0:t.$parent)==null?void 0:e.$parent}}}),qe=["fill","width","height"],He=["fill-opacity","width"],je=["x"],Xe=["x1","x2"],Ye=["x1","x2"],Fe=["width","height"],We={class:"prevent-node-drag"};function Ge(t,e,o,n,i,s){var l,d,a,h,m,b,w,v,u,y,g,S;return p(),c("g",null,[r("rect",{fill:t.color,x:"0",y:"0",rx:"3",ry:"3",width:(l=t.nodeModel)==null?void 0:l.width,height:(d=t.nodeModel)==null?void 0:d.height,class:"node-dark-background"},null,8,qe),r("rect",{fill:"#000000","fill-opacity":t.titleFillOpacity,x:"2",y:"2",rx:"3",ry:"3",width:((a=t.nodeModel)==null?void 0:a.width)-4,height:"16",class:"node-dark-background"},null,8,He),r("text",{x:"5",y:"15",class:U(t.options.editableTitle?"title-editable":""),"font-size":"14","font-weight":"bold",fill:"#000000",ref:"title",style:N(t.options.titleStyle||""),onClick:e[0]||(e[0]=X=>t.options.editableTitle?t.parentDiagram.editText(t.nodeModel,"title",t.$refs.title):void 0)},B((h=t.nodeModel)==null?void 0:h.title),7),(m=t.nodeModel)!=null&&m.deletable?(p(),c("g",{key:0,onClick:e[1]||(e[1]=X=>t.$emit("deleteNode"))},[r("rect",{x:((b=t.nodeModel)==null?void 0:b.width)-12,y:"3",width:"14",height:"14",rx:"2",ry:"2",fill:"#ffffff","fill-opacity":.25},null,8,je),r("line",{x1:(w=t.nodeModel)==null?void 0:w.width,y1:5,x2:((v=t.nodeModel)==null?void 0:v.width)-10,y2:15,style:{stroke:"rgb(0,0,0)"},"stroke-width":"2"},null,8,Xe),r("line",{x1:((u=t.nodeModel)==null?void 0:u.width)-10,y1:5,x2:(y=t.nodeModel)==null?void 0:y.width,y2:15,style:{stroke:"rgb(0,0,0)"},"stroke-width":"2"},null,8,Ye)])):R("",!0),r("rect",{fill:"#ffffff",x:"2",y:"20",rx:"3",ry:"3",width:((g=t.nodeModel)==null?void 0:g.width)-4,height:((S=t.nodeModel)==null?void 0:S.height)-22,class:"node-light-background"},null,8,Fe),r("g",We,[H(t.$slots,"default")])])}const Ke=Z(Ue,[["render",Ge]]),ot={mounted(){this.$el.vueComponent=this}},Qe=C({name:"DiagramNode",props:{index:Number,id:{type:Number,required:!0},ports:{type:Array,default:()=>[]},width:{type:Number,required:!0},height:{type:Number,required:!0},deletable:{type:Boolean,default:!0},options:{type:Object,default:()=>({})},selected:Boolean,nodeModel:{type:Object,required:!0}},components:{"vue-diagrams-node-text":Ce,"vue-diagrams-node-image":Ve,"vue-diagrams-node-shader":Ke,"vue-diagrams-node-card":Le},mixins:[ot],data(){return{resizeHandles:void 0,titleFillOpacity:1,menu:[{label:"Delete node",handler(){},classes:[]}]}},beforeUnmount(){this.resizeHandles&&this.resizeHandles.unmount()},watch:{"nodeModel.x":"resizeNode","nodeModel.y":"resizeNode","nodeModel.width":"resizeNode","nodeModel.height":"resizeNode","options.resizable":{handler(t){this.$nextTick(()=>{t?this.resizeHandles=new Se(this.$refs.resizeHandles,this.nodeModel.width,this.nodeModel.height,this.startDragResizeHandle):this.resizeHandles&&(this.resizeHandles.unmount(),this.resizeHandles=void 0)})},immediate:!0},"options.type":{handler(){this.menu=this.menu.filter(t=>t.from!=="nodeType"),this.$nextTick(()=>{const t=this.$refs.nodeType;if(console.log("this.$refs.nodeType.menu?",t&&t.menu),t&&t.menu){t.menu.length&&this.menu.unshift({classes:["separator"],from:"nodeType"});for(let e of t.menu)this.menu.unshift({...e,from:"nodeType"})}})},immediate:!0}},computed:{x(){return this.nodeModel.x},y(){return this.nodeModel.y}},methods:{resizeNode(){this.resizeHandles&&this.resizeHandles.updatePosition(this.nodeModel.width,this.nodeModel.height)},deleteNode(){this.$emit("delete")},mouseDown(t){var e;const o=(e=this==null?void 0:this.$parent)==null?void 0:e.$parent;if(o.editable&&!t.target.classList.contains("title-editable")&&t.target.closest(".prevent-node-drag")===null){const n=o.convertXYtoViewPort(t.x,t.y);this.$emit("onStartDrag",{type:"nodes",index:this.index,node:this.nodeModel},n.x-this.nodeModel.x,n.y-this.nodeModel.y)}},mouseenter(){this.titleFillOpacity=.5},mouseleave(){this.titleFillOpacity=.25},startDragResizeHandle(t){var e;((e=this==null?void 0:this.$parent)==null?void 0:e.$parent).editable&&this.$emit("onStartDrag",{type:"resizeHandle",index:this.index,node:this.nodeModel,direction:t},0-this.nodeModel.x,0-this.nodeModel.y)}}}),Je=["x","y","data-node-id"],to=["stroke-width","width","height"],eo={ref:"resizeHandles"};function oo(t,e,o,n,i,s){return p(),c("svg",{x:t.nodeModel.x,y:t.nodeModel.y,class:U(`diagram-node ${t.selected?"selected":""} has-menu`),"data-node-id":t.id},[r("rect",{fill:"#00000000",stroke:"#000000","stroke-width":t.selected?2:0,x:"0",y:"0",rx:"3",ry:"3",width:t.nodeModel.width,height:t.nodeModel.height,class:"node-dark-background"},null,8,to),r("g",eo,null,512),r("g",{onMousedown:e[0]||(e[0]=(...l)=>t.mouseDown&&t.mouseDown(...l)),onMouseenter:e[1]||(e[1]=(...l)=>t.mouseenter&&t.mouseenter(...l)),onMouseleave:e[2]||(e[2]=(...l)=>t.mouseleave&&t.mouseleave(...l))},[(p(),O(Tt(`vue-diagrams-node-${t.options.type||"shader"}`),{ref:"nodeType",nodeModel:t.nodeModel,selected:t.selected,onDeleteNode:t.deleteNode},{default:j(()=>[H(t.$slots,"default",{},void 0,!0)]),_:3},40,["nodeModel","selected","onDeleteNode"]))],32)],10,Je)}const no=Z(Qe,[["render",oo],["__scopeId","data-v-b218f38e"]]),io=C({name:"DiagramPoint",props:{x:{type:Number,required:!0},y:{type:Number,required:!0}},mixins:[ot],data(){return{hover:!1,menu:[{label:"Delete point",handler:()=>{this.$emit("delete")}}]}},methods:{mouseEnter(){this.hover=!0},mouseLeave(){this.hover=!1}}}),so={class:"has-menu"},ro=["cx","cy"];function lo(t,e,o,n,i,s){return p(),c("g",so,[r("circle",{style:N(t.hover?"stroke:rgba(255,0,0,0.5);":"stroke:rgba(255,0,0,0.0);"),"stroke-width":"6",onMouseenter:e[0]||(e[0]=(...l)=>t.mouseEnter&&t.mouseEnter(...l)),onMouseleave:e[1]||(e[1]=(...l)=>t.mouseLeave&&t.mouseLeave(...l)),onMousedown:e[2]||(e[2]=l=>t.$emit("mousedown",l)),cx:t.x,cy:t.y,r:"5",fill:"black"},null,44,ro)])}const ao=Z(io,[["render",lo]]),ho=C({name:"DiagramLink",props:["positionFrom","positionTo","id","index","points","options"],components:{DiagramPoint:ao},data(){return{largeStrokeStyle:"stroke:rgba(255,0,0,0.0);",pointStyleNormal:"stroke:rgba(255,0,0,0.0); stroke-width: 6",pointStyleHover:"stroke:rgba(255,0,0,0.5); stroke-width: 6",beginCurvePath:void 0,endCurvePath:void 0,menu:[{label:"Delete link",handler(){}}]}},computed:{x1(){return this.positionFrom.x},y1(){return this.positionFrom.y-4},x2(){return this.positionTo.x-4},y2(){return this.positionTo.y-4},curve(){if(this.positionFrom.x&&this.positionFrom.y&&this.positionTo.x&&this.positionTo.y){var t=Math.trunc(this.positionFrom.x),e=Math.trunc(this.positionFrom.y-4),o=Math.trunc(this.positionTo.x-4),n=Math.trunc(this.positionTo.y-4);const i=Math.trunc(4*Math.sqrt(Math.abs(t-o)));return`M${t},${e} C${t+i},${e} ${o-i},${n} ${o},${n}`}}},methods:{refreshLink(){},deleteLink:function(){this.$emit("delete")},mouseEnter(){this.largeStrokeStyle="stroke:rgba(255,0,0,0.5);"},mouseLeave(){this.largeStrokeStyle="stroke:rgba(255,0,0,0.0);"},mouseEnterPoint(){},mouseLeavePoint(){},mouseDownPoint(t,e){this.$emit("onStartDrag",{$event:t,type:"points",linkIndex:this.index,pointIndex:e})},mouseDown(){},mouseDownSegment(t,e){var o;((o=this.$parent)==null?void 0:o.$parent).editable&&(this.createPoint(t.x,t.y,e),this.mouseDownPoint(t,e))},createPoint(t,e,o){this.$emit("onCreatePoint",t,e,this.index,o)}}}),uo={class:"diagram-link has-menu"},po=["onMousedown"],co=["x1","y1","x2","y2"],mo=["x1","y1","x2","y2"],go=["x1","y1","x2","y2"],vo=["x1","y1","x2","y2"],fo=["d"],yo=["d"];function wo(t,e,o,n,i,s){const l=A("DiagramPoint");return p(),c("g",uo,[t.points&&t.points.length?(p(),c("g",{key:0,onMouseenter:e[1]||(e[1]=(...d)=>t.mouseEnter&&t.mouseEnter(...d)),onMouseleave:e[2]||(e[2]=(...d)=>t.mouseLeave&&t.mouseLeave(...d)),onMousedown:e[3]||(e[3]=(...d)=>t.mouseDown&&t.mouseDown(...d))},[(p(!0),c(z,null,E(t.points,(d,a)=>(p(),c("g",{key:a,onMousedown:h=>t.mouseDownSegment(h,a)},[r("line",{x1:a===0?t.x1:t.points[a-1].x,y1:a===0?t.y1:t.points[a-1].y,x2:d.x,y2:d.y,style:N(t.largeStrokeStyle),"stroke-width":"8"},null,12,co),r("line",{x1:a===0?t.x1:t.points[a-1].x,y1:a===0?t.y1:t.points[a-1].y,x2:d.x,y2:d.y,style:{stroke:"rgb(0,0,0)"},"stroke-width":"2"},null,8,mo)],40,po))),128)),r("g",{onMousedown:e[0]||(e[0]=d=>t.mouseDownSegment(d,t.points.length))},[r("line",{x1:t.points[t.points.length-1].x,y1:t.points[t.points.length-1].y,x2:t.x2,y2:t.y2,style:N(t.largeStrokeStyle),"stroke-width":"8"},null,12,go),r("line",{x1:t.points[t.points.length-1].x,y1:t.points[t.points.length-1].y,x2:t.x2,y2:t.y2,style:{stroke:"rgb(0,0,0)"},"stroke-width":"2"},null,8,vo)],32)],32)):(p(),c("g",{key:1,onMouseenter:e[5]||(e[5]=(...d)=>t.mouseEnter&&t.mouseEnter(...d)),onMouseleave:e[6]||(e[6]=(...d)=>t.mouseLeave&&t.mouseLeave(...d)),onMousedown:e[7]||(e[7]=(...d)=>t.mouseDown&&t.mouseDown(...d))},[r("g",{onMousedown:e[4]||(e[4]=d=>t.mouseDownSegment(d,0))},[r("path",{d:t.curve,style:N(t.largeStrokeStyle),"stroke-width":"8",fill:"none"},null,12,fo),r("path",{d:t.curve,ref:"curvePath",style:{stroke:"rgb(0,0,0)"},"stroke-width":"2",fill:"none"},null,8,yo)],32)],32)),(p(!0),c(z,null,E(t.points,(d,a)=>(p(),O(l,{key:a,onMouseenter:e[8]||(e[8]=h=>t.mouseEnterPoint()),onMouseleave:e[9]||(e[9]=h=>t.mouseLeavePoint()),onMousedown:h=>t.mouseDownPoint(h,a),x:d.x,y:d.y,onDelete:h=>t.points.splice(a,1)},null,8,["onMousedown","x","y","onDelete"]))),128))])}const bo=Z(ho,[["render",wo]]),xo=C({name:"DiagramPort",props:["id","x","y","node","nodeIndex","port"],data(){return{fill:"#666666",menu:[{label:"Delete port",handler:()=>{var t;const e=this.$parent;e.nodeModel.deletePort(this.id),(t=e.$parent)==null||t.$parent.updateLinksPositions()}},{label:"Remove port links",handler:()=>{this.$parent.nodeModel.removePortLinks(this.id)}}]}},mixins:[ot],computed:{width(){return this.node.width||72},displayedY(){return this.port.options&&this.port.options.y?this.port.options.y:this.y+40},displayedX(){return this.port.options&&this.port.options.x?this.port.options.x:this.port.type==="out"?this.width-5:-5}},methods:{mouseup(){this.$emit("mouseUpPort",this.id)},enter(){this.fill="#999999"},leave(){console.log("leave",this.id),this.fill="#666666"},startDragNewLink(){this.$emit("onStartDragNewLink",this.id)}}}),So={class:"diagram-port has-menu"},Mo=["y"],_o=["fill","x"],Po={x:"12",y:"9","font-size":"8pt",fill:"#000000"},ko=["y"],Co=["fill","x"],Do=["x"];function Io(t,e,o,n,i,s){return p(),c("g",So,[t.port.type==="in"?(p(),c("svg",{key:0,y:t.displayedY,style:{overflow:"visible"}},[r("rect",{fill:t.fill,ref:"handle",x:t.displayedX,y:"0",rx:"3",ry:"3",width:"10",height:"10",onMouseenter:e[0]||(e[0]=(...l)=>t.enter&&t.enter(...l)),onMouseleave:e[1]||(e[1]=(...l)=>t.leave&&t.leave(...l)),onMousedown:e[2]||(e[2]=(...l)=>t.startDragNewLink&&t.startDragNewLink(...l)),onMouseup:e[3]||(e[3]=(...l)=>t.mouseup&&t.mouseup(...l))},null,40,_o),r("text",Po,B(t.port.name),1)],8,Mo)):(p(),c("svg",{key:1,y:t.displayedY},[r("rect",{fill:t.fill,ref:"handle",x:t.displayedX,y:"0",rx:"3",ry:"3",width:"10",height:"10",onMouseenter:e[4]||(e[4]=(...l)=>t.enter&&t.enter(...l)),onMouseleave:e[5]||(e[5]=(...l)=>t.leave&&t.leave(...l)),onMousedown:e[6]||(e[6]=(...l)=>t.startDragNewLink&&t.startDragNewLink(...l)),onMouseup:e[7]||(e[7]=(...l)=>t.mouseup&&t.mouseup(...l))},null,40,Co),r("text",{x:t.width-6,y:"9","text-anchor":"end","font-size":"8pt",fill:"#000000"},B(t.port.name),9,Do)],8,ko))])}const zo=Z(xo,[["render",Io]]),mt=()=>Math.trunc(Math.random()*1e3),Eo=t=>{var e=t.getBoundingClientRect(),o=e.left,n=e.top;return{x:o,y:n}},gt=(t,e)=>e*Math.round(t/e),To=C({name:"Diagram",Model:xe,props:{model:{type:Object,required:!0},width:{default:500},height:{default:500},gridSnap:{default:1},showMenu:{type:Boolean,default:!1},showThumbnail:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},controlIconsEnabled:{type:Boolean,default:!0}},data(){return this.updateLinksPositions(),{mode:"move",document,zoomEnabled:!0,panEnabled:!0,draggedItem:void 0,mainSelectedItem:{index:void 0,type:void 0},secondarySelectedNodes:[],initialDragX:0,initialDragY:0,mouseButtonIsPressed:!1,mouseDownViewportPos:{x:void 0,y:void 0},viewportMousePos:{x:void 0,y:void 0},newLink:void 0,mouseX:0,mouseY:0,viewPosition:void 0,magnetismAnchors:[],spz:void 0}},components:{Menu:ve,TextInput:we,DiagramNode:no,DiagramLink:bo,DiagramPort:zo,SvgPanZoom:_t},computed:{querySelector(){return document.querySelector("#viewport")}},watch:{mode:{handler(t){this.$nextTick(()=>{var e,o,n;t==="move"?this.panEnabled?(e=this.spz)==null||e.enablePan():(o=this.spz)==null||o.disablePan():(n=this.spz)==null||n.disablePan()})},immediate:!0},"model._model":{handler(){this.$emit("model-updated",this.model._model)},deep:!0},"model._model.links"(){this.updateLinksPositions()}},methods:{spzCreated(t){this.spz=t,t.setBeforePan((...e)=>this.beforePan.apply(this,e))},editText(t,e,o){this.editable&&this.$refs.textInput.editText(t,e,o)},min(t,e){return t===void 0?e:e===void 0?t:Math.min(t,e)},max(t,e){return t===void 0?e:e===void 0?t:Math.max(t,e)},convertXYtoViewPort(t,e){let o=document.getElementById("svgroot2"),n=document.getElementById("viewport"),i=o.createSVGPoint(),s=Eo(this.$el);i.x=t-s.x,i.y=e-s.y;let l=n.getCTM().inverse();return i.matrixTransform(l)},beforePan(){return!(this.mainSelectedItem.type||this.draggedItem||this.newLink)},createPoint(t,e,o,n){let i=this.convertXYtoViewPort(t,e),s=this.model._model.links;s[o].points===void 0&&(s[o].points=[]);var l=s[o].points;l.splice(n,0,i),s[o].points=l},clearSelection(){this.mainSelectedItem={}},updateLinksPositions(){var t=[];this.model&&this.model._model&&(t=this.model._model.links),this.$nextTick(()=>{setTimeout(()=>{for(var e=0;e<t.length;e++){let o;if(o=this.getPortHandlePosition(t[e].from),t[e].positionFrom={x:o==null?void 0:o.x,y:o==null?void 0:o.y},o=this.getPortHandlePosition(t[e].to),t[e].positionTo={x:o==null?void 0:o.x,y:o==null?void 0:o.y},this.$refs["link-"+t[e].id]){let n=this.$refs["link-"+t[e].id];Array.isArray(n)&&(n=n[0]),n&&n.refreshLink&&n.refreshLink()}}},100)})},startDragNewLink(t){this.editable&&(this.panEnabled=!1,this.newLink={startPortId:t})},getPortHandlePosition(t){if(this.$refs["port-"+t]&&this.$refs["port-"+t][0]){const e=this.$refs["port-"+t][0],o=this.$refs["node-"+e.nodeIndex][0];let n,i;return e.port.type,n=o.x+e.displayedX+5,i=o.y+e.displayedY+9,{x:n,y:i}}else{console.warn(`port "${t}" not found. you must call this method after the first render`);return}},mouseMove(t){if(!this.editable)return;const e=this.model._model.links;if(this.$el.getBoundingClientRect(),this.mouseX=t.clientX,this.mouseY=t.clientY,this.viewportMousePos=this.convertXYtoViewPort(t.x,t.y),this.mode==="move"&&this.draggedItem){const o=this.draggedItem.index,n=this.draggedItem.type;let i=this.convertXYtoViewPort(this.mouseX,this.mouseY);i.x=gt(i.x,this.gridSnap)-this.gridSnap/2,i.y=gt(i.y,this.gridSnap);for(let s of this.magnetismAnchors)s.show=!1,s.x&&Math.abs(s.x-(i.x-this.initialDragX))<10&&(i.x=s.x+this.initialDragX,s.show=!0),s.y&&Math.abs(s.y-(i.y-this.initialDragY))<10&&(i.y=s.y+this.initialDragY,s.show=!0),this.draggedItem.node&&(s.x&&Math.abs(s.x-(i.x-this.initialDragX+this.draggedItem.node.width))<10&&(i.x=s.x+this.initialDragX-this.draggedItem.node.width,s.show=!0),s.y&&Math.abs(s.y-(i.y-this.initialDragY+this.draggedItem.node.height))<10&&(i.y=s.y+this.initialDragY-this.draggedItem.node.height,s.show=!0));if(n==="points"){const s=this.draggedItem.linkIndex,l=this.draggedItem.pointIndex;e[s].points[l].x=i.x,e[s].points[l].y=i.y,this.updateLinksPositions()}if(n==="resizeHandle"){if(this.draggedItem.direction.indexOf("e")!==-1&&(this.model._model.nodes[o].width=i.x-this.model._model.nodes[o].x,this.updateLinksPositions()),this.draggedItem.direction.indexOf("s")!==-1&&(this.model._model.nodes[o].height=i.y-this.model._model.nodes[o].y,this.updateLinksPositions()),this.draggedItem.direction.indexOf("n")!==-1){const s=this.model._model.nodes[o].y+this.model._model.nodes[o].height;this.model._model.nodes[o].y=i.y,this.model._model.nodes[o].height=s-i.y,this.updateLinksPositions()}if(this.draggedItem.direction.indexOf("w")!==-1){const s=this.model._model.nodes[o].x+this.model._model.nodes[o].width;this.model._model.nodes[o].x=i.x,this.model._model.nodes[o].width=s-i.x,this.updateLinksPositions()}}else{if(this.model._model[n]&&this.model._model[n][o]){const s=this.model._model[n][o].x,l=this.model._model[n][o].y;this.model._model[n][o].x=i.x-this.initialDragX,this.model._model[n][o].y=i.y-this.initialDragY;const d=this.model._model[n][o].x-s,a=this.model._model[n][o].y-l;for(let h of this.secondarySelectedNodes)n==="nodes"&&h===this.model._model[n][o]||(h.x+=d,h.y+=a)}this.updateLinksPositions()}}},mouseDown(t){this.editable&&(this.mouseButtonIsPressed=!0,t.target.classList.contains("title-editable")||this.$refs.textInput.editText())},mouseUp(){if(this.editable&&(this.mouseButtonIsPressed=!1,this.mode==="move"&&this.secondarySelectedNodes&&this.secondarySelectedNodes.length&&(!this.draggedItem||this.draggedItem.type!=="nodes"||this.secondarySelectedNodes.filter(t=>t===this.model._model.nodes[this.draggedItem.index]).length===0)&&(this.secondarySelectedNodes=[]),this.draggedItem=void 0,this.newLink=void 0,this.mode==="select")){this.secondarySelectedNodes=[];for(let t of this.model._model.nodes){const e=Math.min(this.viewportMousePos.x,this.mouseDownViewportPos.x),o=Math.min(this.viewportMousePos.y,this.mouseDownViewportPos.y),n=Math.max(this.viewportMousePos.x,this.mouseDownViewportPos.x),i=Math.max(this.viewportMousePos.y,this.mouseDownViewportPos.y);t.x<n&&t.y<i&&t.x+t.width>e&&t.y+t.height>o&&this.secondarySelectedNodes.push(t),this.mode="move"}}},mouseUpPort(t){if(this.editable){var e=this.model._model.links;if(this.draggedItem&&this.draggedItem.type==="points"){const o=this.draggedItem.pointIndex,n=this.draggedItem.linkIndex;if(this.$refs["port-"+t][0].type==="in"){const i=e[n].points.length;e[n].points.splice(o,i-this.draggedItem.pointIndex)}else e[n].points.splice(0,o+1);this.updateLinksPositions()}if(this.newLink!==void 0){const o=this.newLink.startPortId,n=t,i=this.$refs["port-"+o][0],s=this.$refs["port-"+n][0];i.type==="in"&&s.type==="out"?e.push({id:mt(),from:s.id,to:i.id,positionFrom:{},positionTo:{},points:[]}):s.port.type==="in"&&i.port.type==="out"?e.push({id:mt(),from:i.id,to:s.id,positionFrom:{},positionTo:{},points:[]}):console.warn("You must link one out port and one in port"),this.model._model.links=e,this.updateLinksPositions()}}},startDragPoint(t){this.draggedItem=t},startDragItem(t,e,o){this.panEnabled=!1,this.draggedItem=t,this.mainSelectedItem=t,this.initialDragX=e,this.initialDragY=o,this.listMagnetismAnchors()},listMagnetismAnchors(){const t=[];for(let e of this.model._model.nodes)e.id!==this.draggedItem.node.id&&(t.push({x:e.x||0,node:e}),t.push({y:e.y||0,node:e}),t.push({x:e.x+e.width||0,node:e}),t.push({y:e.y+e.height||0,node:e}));this.magnetismAnchors=t}}}),Zo=t=>(Ct("data-v-fa27ef53"),t=t(),Dt(),t),No={class:"vue-diagrams"},Lo=["viewBox","width","height"],Bo=Zo(()=>r("defs",null,[r("pattern",{id:"smallGrid",width:"16",height:"16",patternUnits:"userSpaceOnUse"},[r("path",{d:"M 16 0 L 0 0 0 16",fill:"none",stroke:"#ccc","stroke-width":"1"})]),r("pattern",{id:"grid",width:"80",height:"80",patternUnits:"userSpaceOnUse"},[r("rect",{width:"80",height:"80",fill:"url(#smallGrid)"}),r("path",{d:"M 80 0 L 0 0 0 80",fill:"none",stroke:"gray","stroke-width":"1"})])],-1)),Ao={ref:"viewPort",id:"viewport",x:"50",y:"50"},Oo=["x1","y1","x2","y2"],$o=["x","y","width","height"],Ro={class:"thumbViewClass"},Vo=["x","y","width","height","fill"];function Uo(t,e,o,n,i,s){const l=A("Menu"),d=A("TextInput"),a=A("DiagramLink"),h=A("DiagramPort"),m=A("DiagramNode"),b=A("SvgPanZoom");return p(),c("div",No,[t.showMenu?(p(),O(l,{key:0,ref:"menu"},null,512)):R("",!0),P(d,{ref:"textInput"},null,512),P(b,{ref:"svgpanzoom",style:N({width:t.width+"px",height:t.height+"px",border:"1px solid black"}),zoomEnabled:t.zoomEnabled,id:"svgroot",panEnabled:t.panEnabled,controlIconsEnabled:!0,fit:!1,center:!0,viewportSelector:"#svgroot2",preventMouseEventsDefault:!1,beforePan:t.beforePan,onCreated:t.spzCreated},Pt({default:j(()=>{var w,v;return[(p(),c("svg",{id:"svgroot2",version:"1.1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.width+" "+t.height,width:t.width,height:t.height,preserveAspectRatio:"xMinYMin meet",class:"svg-content",ref:"dragramRoot",onMousemove:e[1]||(e[1]=(...u)=>t.mouseMove&&t.mouseMove(...u)),onMouseup:e[2]||(e[2]=(...u)=>t.mouseUp&&t.mouseUp(...u)),onMousedown:e[3]||(e[3]=(...u)=>t.mouseDown&&t.mouseDown(...u))},[Bo,r("rect",{ref:"grid",class:"svg-pan-zoom_viewport",x:"-5000px",y:"-5000px",width:"10000px",height:"10000px",fill:"url(#grid)",onMousedown:e[0]||(e[0]=(...u)=>t.clearSelection&&t.clearSelection(...u))},null,544),r("g",Ao,[(p(!0),c(z,null,E(t.model._model.links,(u,y)=>(p(),O(a,{ref_for:!0,ref:"link-"+u.id,positionFrom:u.positionFrom,positionTo:u.positionTo,points:u.points,id:u.id,key:u.id,index:y,options:u.options,onOnStartDrag:t.startDragPoint,onOnCreatePoint:t.createPoint,onDelete:g=>t.model.deleteLink(u)},null,8,["positionFrom","positionTo","points","id","index","options","onOnStartDrag","onOnCreatePoint","onDelete"]))),128)),t.newLink?(p(),c("line",{key:0,x1:(w=t.getPortHandlePosition(t.newLink.startPortId))==null?void 0:w.x,y1:(v=t.getPortHandlePosition(t.newLink.startPortId))==null?void 0:v.y,x2:t.convertXYtoViewPort(t.mouseX,0).x,y2:t.convertXYtoViewPort(0,t.mouseY).y,style:{stroke:"rgb(255,0,0)","stroke-width":"2"}},null,8,Oo)):R("",!0),(p(!0),c(z,null,E(t.model._model.nodes,(u,y)=>(p(),O(m,{ref_for:!0,ref:"node-"+y,title:u.title,nodeModel:u,x:u.x,y:u.y,id:u.id,key:u.id,width:u.width,height:u.height,ports:u.ports,selected:t.mainSelectedItem.type==="nodes"&&t.mainSelectedItem.index===y||t.secondarySelectedNodes.indexOf(u)!==-1,options:u.options,index:y,onOnStartDrag:t.startDragItem,onDelete:g=>t.model.deleteNode(u)},{default:j(()=>[(p(!0),c(z,null,E(u.ports,(g,S)=>(p(),O(h,{key:S,ref_for:!0,ref:"port-"+g.id,id:g.id,nodeIndex:y,y:S*20,node:u,port:g,onOnStartDragNewLink:t.startDragNewLink,onMouseUpPort:t.mouseUpPort},null,8,["id","nodeIndex","y","node","port","onOnStartDragNewLink","onMouseUpPort"]))),128))]),_:2},1032,["title","nodeModel","x","y","id","width","height","ports","selected","options","index","onOnStartDrag","onDelete"]))),128)),t.mode==="select"&&t.mouseButtonIsPressed?(p(),c("rect",{key:1,x:t.min(t.viewportMousePos.x,t.mouseDownViewportPos.x),y:t.min(t.viewportMousePos.y,t.mouseDownViewportPos.y),width:(t.max(t.viewportMousePos.x,t.mouseDownViewportPos.x)||0)-(t.min(t.viewportMousePos.x,t.mouseDownViewportPos.x)||0),height:(t.max(t.viewportMousePos.y,t.mouseDownViewportPos.y)||0)-(t.min(t.viewportMousePos.y,t.mouseDownViewportPos.y)||0),fill:"#000000","fill-opacity":.5},null,8,$o)):R("",!0)],512)],40,Lo))]}),_:2},[t.showThumbnail?{name:"thumbnail",fn:j(()=>[(p(),c("svg",Ro,[(p(!0),c(z,null,E(t.model._model.nodes,w=>(p(),c("rect",{x:w.x,y:w.y,width:w.width,height:w.height,fill:w.color||"#66cc00",key:w.id},null,8,Vo))),128)),(p(!0),c(z,null,E(t.model._model.links,(w,v)=>(p(),O(a,{positionFrom:w.positionFrom,positionTo:w.positionTo,points:w.points,id:w.id,index:v,options:w.options,key:v},null,8,["positionFrom","positionTo","points","id","index","options"]))),128))]))]),key:"0"}:void 0]),1032,["style","zoomEnabled","panEnabled","beforePan","onCreated"])])}const vt=Z(To,[["render",Uo],["__scopeId","data-v-fa27ef53"]]);var _=[];for(var Q=0;Q<256;++Q)_.push((Q+256).toString(16).slice(1));function qo(t,e=0){return(_[t[e+0]]+_[t[e+1]]+_[t[e+2]]+_[t[e+3]]+"-"+_[t[e+4]]+_[t[e+5]]+"-"+_[t[e+6]]+_[t[e+7]]+"-"+_[t[e+8]]+_[t[e+9]]+"-"+_[t[e+10]]+_[t[e+11]]+_[t[e+12]]+_[t[e+13]]+_[t[e+14]]+_[t[e+15]]).toLowerCase()}var Y,Ho=new Uint8Array(16);function jo(){if(!Y&&(Y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Y))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y(Ho)}var Xo=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const ft={randomUUID:Xo};function yt(t,e,o){if(ft.randomUUID&&!e&&!t)return ft.randomUUID();t=t||{};var n=t.random||(t.rng||jo)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){o=o||0;for(var i=0;i<16;++i)e[o+i]=n[i];return e}return qo(n)}const{triple:D,namedNode:x,literal:F}=$t,Yo={name:"VocPad",setup(){const t=Nt(),e=it();return{store:t,selection:e}},components:{TermInput:Lt,Diagram:vt},data(){return{classes:[],properties:[],class_iri:x("http://example.org/classes#"),class_label:F(""),class_comment:F(""),property_iri:x("http://example.org/properties#"),property_label:F(""),property_comment:F(""),nodes:[],portIds:[],model:new vt.Model,originalDataModel:[],next_x:null,next_y:null,hover_note_shown:!1,add_class_modal:null,add_property_modal:null}},computed:{...Bt(it,["graph_iri"])},mounted(){this.getLists(),this.getShapes(),this.add_class_modal=new st(this.$refs.add_class),this.add_property_modal=new st(this.$refs.add_property)},watch:{graph_iri(t){console.log("graph_iri changed"+t),this.getLists(),this.getShapes()}},methods:{select(t){console.log(t),this.selection.changeResourceIri(t)},async getLists(){this.getList("select distinct ?resourceIri {           {             ?sc a ?resourceIri           } union {             ?resourceIri a <http://www.w3.org/2000/01/rdf-schema#Class>           } union {             ?resourceIri a <http://www.w3.org/2002/07/owl#Class>           }         } order by ?resourceIri","class").then(t=>{this.classes=t}),this.getList("select distinct ?resourceIri {           {             ?sp ?resourceIri ?op           } union {             ?resourceIri a <http://www.w3.org/1999/02/22-rdf-syntax-ns#Property>           } union {             ?resourceIri a <http://www.w3.org/2002/07/owl#ObjectProperty>           } union {             ?resourceIri a <http://www.w3.org/2002/07/owl#DatatypeProperty>           }         } order by ?resourceIri","property").then(t=>{this.properties=t})},async getList(t,e){const o=await this.store.sendQuery(t);if(o.resultType==="bindings"){const n=[],i=await o.execute();for await(const s of i)s.has("resourceIri")&&n.push({iri:s.get("resourceIri").value,termType:e});return n}},async add_term(t){let e=[];t==="class"?e=[D(this.class_iri,x("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),x("http://www.w3.org/2000/01/rdf-schema#Class")),D(this.class_iri,x("http://www.w3.org/2000/01/rdf-schema#label"),this.class_label),D(this.class_iri,x("http://www.w3.org/2000/01/rdf-schema#comment"),this.class_comment)]:t==="property"&&(e=[D(this.property_iri,x("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),x("http://www.w3.org/1999/02/22-rdf-syntax-ns#Property")),D(this.property_iri,x("http://www.w3.org/2000/01/rdf-schema#label"),this.property_label),D(this.property_iri,x("http://www.w3.org/2000/01/rdf-schema#comment"),this.property_comment)]);try{await this.store.deleteInsertData({insertArray:e,graphIri:this.graph_iri}),this.getLists()}catch(o){console.error(o)}},startDrag:(t,e)=>{t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("iri",e.iri),t.dataTransfer.setData("termType",e.termType),console.log("start dragging "+e.iri)},onDrop(t){const e=t.dataTransfer.getData("iri"),o=t.dataTransfer.getData("termType");console.log("received "+e),console.log(e),console.log(o),o==="class"&&this.addNodeShape("urn:nodeshape:"+yt(),e,t.layerX,t.layerY)},onDropNode(t,e){const o=t.dataTransfer.getData("iri"),n=t.dataTransfer.getData("termType");console.log("received on diagram node "+o),console.log(o),n==="property"&&this.addPropertyShape(e,"urn:propertyshape:"+yt(),o)},configureProperty(t,e){console.log(t),console.log(e),console.log("configure "+t.object.shapeIri.id+" port"+e.object.shapeIri.id)},shortenIri(t){return At().shortenIri(t)},getShapeByPortId(t){return x(this.portIds[t])},getPortIdByShape(t){const e=this.portIds.indexOf(t);if(e!==-1)return e},setShapePortIdMapping(t,e){const o=this.portIds.indexOf(t);o>-1&&o!==e&&console.log("Duplicate shapeIri should not happen"),this.portIds[e]=t},async saveShapes(){const t=this.model._model;console.log(this.model.serialize());const e=[];for(const n in t.nodes){const i=t.nodes[n],s=i.object.shapeIri,l=i.object.targetClass;for(const d in i.ports){const a=i.ports[d];if(a.name==="IRI")this.setShapePortIdMapping(s.id,a.id);else{const h=a.object.shapeIri,m=a.object.path;this.setShapePortIdMapping(h.id,a.id),e.push(D(s,x("http://www.w3.org/ns/shacl#property"),h)),e.push(D(h,x("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),x("http://www.w3.org/ns/shacl#PropertyShape"))),e.push(D(h,x("http://www.w3.org/ns/shacl#path"),m))}}e.push(D(s,x("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),x("http://www.w3.org/ns/shacl#NodeShape"))),e.push(D(s,x("http://www.w3.org/ns/shacl#targetClass"),l))}for(const n in t.links){const i=t.links[n];e.push(D(this.getShapeByPortId(i.from),x("http://www.w3.org/ns/shacl#node"),this.getShapeByPortId(i.to)))}const o=Rt(this.originalDataModel,e);console.log(o);try{await this.store.deleteInsertData({insertArray:o.add,deleteArray:o.del,graphIri:this.graph_iri}),this.$bvToast.toast("Shapes where saved to the store",{title:"Save Shapes",autoHideDelay:500})}catch(n){this.$bvToast.toast("Storing the Shapes failed",{title:"Save Shapes",variant:"danger",autoHideDelay:5e3}),console.error(n)}},nextPosition(t=!1){return t||this.next_x===null?(this.next_x=-1.75,this.next_y=0):this.next_x<1?this.next_x+=1:(this.next_x=-1.75,this.next_y+=1),{x:this.next_x*240,y:this.next_y*180}},addNodeShape(t,e,o=null,n=null,i=200){if(this.nodes[t]!==void 0)return this.nodes[t];{const s={title:this.shortenIri(e),targetClass:x(e),shapeIri:x(t)};if(o===null||n===null){const d=this.nextPosition();o=d.x,n=d.y}const l=this.model.addNode(s,o,n,i);return this.nodes[t]=l,this.setShapePortIdMapping(t,l.addInPort("IRI")),l}},addPropertyShape(t,e,o){if(this.getPortIdByShape(e))return this.getPortIdByShape(e);const n={title:this.shortenIri(o),path:x(o),shapeIri:x(e)},i=t.addOutPort(n);return this.setShapePortIdMapping(e,i),i},getShapes(){this.store.sendQuery(`PREFIX sh: <http://www.w3.org/ns/shacl#>
        select distinct ?nodeShape ?targetClass ?propertyShape ?path ?nodeShapeRef ?targetClassRef {
          ?nodeShape a sh:NodeShape ;
            sh:targetClass ?targetClass .
          optional {
            ?nodeShape sh:property ?propertyShape .
            ?propertyShape sh:path ?path .
            optional {
              ?propertyShape sh:node ?nodeShapeRef .
              ?nodeShapeRef sh:targetClass ?targetClassRef .
            }
          }
        } order by ?nodeShape ?propertyShape`).then(async t=>{if(t.resultType==="bindings"){const e=await t.execute();for await(const o of e){const n=this.addNodeShape(o.get("nodeShape").value,o.get("targetClass").value);if(o.has("propertyShape")&&o.has("path")){const i=this.addPropertyShape(n,o.get("propertyShape").value,o.get("path").value);o.has("nodeShapeRef")&&o.has("targetClassRef")&&(this.addNodeShape(o.get("nodeShapeRef").value,o.get("targetClassRef").value),this.model.addLink(i,this.getPortIdByShape(o.get("nodeShapeRef").value)))}}}this.nextPosition(!0)}),this.store.sendQuery(`PREFIX sh: <http://www.w3.org/ns/shacl#>
          construct {
            ?nodeShape a sh:NodeShape ;
              sh:targetClass ?targetClass ;
              sh:property ?propertyShape .
            ?propertyShape a ?propertyShapeType ;
              sh:path ?path ;
              sh:node ?nodeShapeRef .
            ?nodeShapeRef sh:targetClass ?targetClassRef .
          } where {
            ?nodeShape a sh:NodeShape ;
              sh:targetClass ?targetClass .
            optional {
              ?nodeShape sh:property ?propertyShape .
              ?propertyShape sh:path ?path .
              optional {
                ?propertyShape sh:node ?nodeShapeRef .
                ?nodeShapeRef sh:targetClass ?targetClassRef .
              }
              optional {
                ?propertyShape a ?propertyShapeType .
              }
            }
          }`).then(async t=>{t.resultType==="quads"&&(this.originalDataModel=await(await t.execute()).toArray())})},hoverTerms(t){t&&!this.hover_note_shown&&(this.$bvToast.toast("You can drag a class from the left hand side to the canvas to create a NodeShape. In the same way you can drag a property from the left hand side onto a NodeShape to create a PropertyShape.",{title:"Pro Tip!",variant:"info",noAutoHide:!0}),this.hover_note_shown=!0)}}},Fo={class:"row"},Wo={class:"col-3",style:{height:"80vh","overflow-y":"scroll"}},Go={class:"card"},Ko={class:"card-header d-flex justify-content-between align-items-center"},Qo=r("h6",{class:"mb-0"},"Class List",-1),Jo=r("i",{class:"bi bi-arrow-repeat"},null,-1),tn=[Jo],en=r("i",{class:"bi bi-plus-square"},null,-1),on=[en],nn={class:"list-group list-group-flush"},sn=["for","onDragstart","title","onClick"],rn={class:"card"},ln={class:"card-header"},an={class:"d-flex justify-content-between align-items-center"},dn=r("h6",{class:"mb-0"},"Property List",-1),hn=r("i",{class:"bi bi-plus-square"},null,-1),un=[hn],pn={class:"list-group list-group-flush"},cn=["for","title","onDragstart","onClick"],mn={class:"col-9"},gn={class:"card"},vn={class:"card-header d-flex justify-content-between align-items-center"},fn=r("h6",{class:"mb-0"},"Shape Composer",-1),yn=r("i",{class:"bi bi-arrow-repeat"},null,-1),wn=[yn],bn=r("i",{class:"bi bi-save"},null,-1),xn=[bn],Sn={class:"card-body"},Mn={class:"modal",ref:"add_class","data-bs-backdrop":"static"},_n={class:"modal-dialog modal-lg"},Pn={class:"modal-content"},kn={class:"modal-header"},Cn=r("h5",{class:"modal-title"},"Add Class",-1),Dn={class:"modal-body"},In={class:"form-group"},zn=r("label",{for:"class_iri"},"Class IRI",-1),En={class:"form-group"},Tn=r("label",{for:"class_label"},"Label (rdfs:label)",-1),Zn={class:"form-group"},Nn=r("label",{for:"class_comment"},"Comment (rdfs:comment)",-1),Ln={class:"modal-footer"},Bn={class:"modal fade",ref:"add_property","data-bs-backdrop":"static"},An={class:"modal-dialog modal-lg"},On={class:"modal-content"},$n={class:"modal-header"},Rn=r("h5",{class:"modal-title"},"Add Property",-1),Vn={class:"modal-body"},Un={class:"form-group"},qn=r("label",{for:"property_iri"},"Property IRI",-1),Hn={class:"form-group"},jn=r("label",{for:"property_label"},"Label (rdfs:label)",-1),Xn={class:"form-group"},Yn=r("label",{for:"property_comment"},"Comment (rdfs:comment)",-1),Fn={class:"modal-footer"},Wn={class:"modal fade",ref:"configure_property","data-bs-backdrop":"static"},Gn={class:"modal-content"},Kn={class:"modal-header"},Qn=r("h5",{class:"modal-title"},"Configure Property Shape",-1),Jn={class:"modal-body"},ti={class:"form-group"},ei=r("label",{for:"property_iri"},"Type",-1),oi={class:"form-group"},ni=r("label",{for:"property_iri"},"Datatype",-1),ii={class:"form-group"},si=r("label",{for:"property_label"},"Class",-1),ri={class:"form-group"},li=r("label",{for:"property_comment"},"Cardinality",-1),ai={class:"modal-footer"};function di(t,e,o,n,i,s){const l=A("diagram"),d=A("TermInput");return p(),c(z,null,[r("div",Fo,[r("div",Wo,[r("div",Go,[r("div",Ko,[Qo,r("div",null,[r("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=(...a)=>s.getLists&&s.getLists(...a)),title:"Reload","aria-label":"Reload"},tn),r("button",{type:"button",class:"btn btn-secondary",onClick:e[1]||(e[1]=()=>{i.add_class_modal.show()}),title:"Create Class","aria-label":"Create Class"},on)])]),r("div",nn,[(p(!0),c(z,null,E(i.classes,(a,h)=>(p(),c("li",{class:"list-group-item py-2",key:"class-"+h,for:"class-"+h,style:{cursor:"move"},draggable:"true",onDragstart:m=>s.startDrag(m,a),title:a.iri,onClick:m=>s.select(a.iri)},B(s.shortenIri(a.iri)),41,sn))),128))])]),r("div",rn,[r("div",ln,[r("div",an,[dn,r("button",{type:"button",class:"btn btn-secondary",onClick:e[2]||(e[2]=()=>{i.add_property_modal.show()}),title:"Create Property","aria-label":"Create Property"},un)])]),r("div",pn,[(p(!0),c(z,null,E(i.properties,(a,h)=>(p(),c("li",{class:"list-group-item py-2",key:"property-"+h,for:"property-"+h,style:{cursor:"move"},draggable:"true",title:a.iri,onDragstart:m=>s.startDrag(m,a),onClick:m=>s.select(a.iri)},B(s.shortenIri(a.iri)),41,cn))),128))])])]),r("div",mn,[r("div",gn,[r("div",vn,[fn,r("div",null,[r("button",{type:"button",class:"btn btn-secondary mb-0",onClick:e[3]||(e[3]=(...a)=>s.getShapes&&s.getShapes(...a)),title:"Reload","aria-label":"Reload"},wn),r("button",{type:"button",class:"btn btn-secondary",onClick:e[4]||(e[4]=(...a)=>s.saveShapes&&s.saveShapes(...a)),title:"Save Schema/Shapes","aria-label":"Save Schema/Shapes"},xn)])]),r("div",Sn,[P(l,{model:i.model,width:"100%",height:"600",onDrop:e[5]||(e[5]=a=>s.onDrop(a)),onDropNode:s.onDropNode,onConfigurePort:s.configureProperty,onDragover:Ot(()=>{},["prevent"])},null,8,["model","onDropNode","onConfigurePort"])])])])]),r("div",Mn,[r("div",_n,[r("div",Pn,[r("div",kn,[Cn,r("button",{type:"button",class:"btn-close",onClick:e[6]||(e[6]=a=>i.add_class_modal.hide()),"aria-label":"Close"})]),r("div",Dn,[r("form",null,[r("div",In,[zn,r("div",null,[P(d,{type:"iri",id:"class_iri",term:i.class_iri,"onUpdate:term":e[7]||(e[7]=a=>i.class_iri=a)},null,8,["term"])])]),r("div",En,[Tn,r("div",null,[P(d,{type:"literal",id:"class_label",term:i.class_label,"onUpdate:term":e[8]||(e[8]=a=>i.class_label=a)},null,8,["term"])])]),r("div",Zn,[Nn,r("div",null,[P(d,{type:"literal",id:"class_comment",term:i.class_comment,"onUpdate:term":e[9]||(e[9]=a=>i.class_comment=a)},null,8,["term"])])])])]),r("div",Ln,[r("button",{type:"button",class:"btn btn-secondary",onClick:e[10]||(e[10]=a=>i.add_class_modal.hide())},"Close"),r("button",{type:"button",class:"btn btn-primary",onClick:e[11]||(e[11]=a=>s.add_term("class"))},"Save changes")])])])],512),r("div",Bn,[r("div",An,[r("div",On,[r("div",$n,[Rn,r("button",{type:"button",class:"btn-close",onClick:e[12]||(e[12]=a=>i.add_property_modal.hide()),"aria-label":"Close"})]),r("div",Vn,[r("form",null,[r("div",Un,[qn,r("div",null,[P(d,{type:"iri",id:"property_iri",term:i.property_iri,"onUpdate:term":e[13]||(e[13]=a=>i.property_iri=a)},null,8,["term"])])]),r("div",Hn,[jn,r("div",null,[P(d,{type:"literal",id:"property_label",term:i.property_label,"onUpdate:term":e[14]||(e[14]=a=>i.property_label=a)},null,8,["term"])])]),r("div",Xn,[Yn,r("div",null,[P(d,{type:"literal",id:"property_comment",term:i.property_comment,"onUpdate:term":e[15]||(e[15]=a=>i.property_comment=a)},null,8,["term"])])])])]),r("div",Fn,[r("button",{type:"button",class:"btn btn-secondary",onClick:e[16]||(e[16]=a=>i.add_property_modal.hide())},"Close"),r("button",{type:"button",class:"btn btn-primary",onClick:e[17]||(e[17]=a=>s.add_term("property"))},"Save changes")])])])],512),r("div",Wn,[r("div",Gn,[r("div",Kn,[Qn,r("button",{type:"button",class:"btn-close",onClick:e[18]||(e[18]=a=>t.configure_property.hide()),"aria-label":"Close"})]),r("div",Jn,[r("form",null,[r("div",ti,[ei,r("div",null,[P(d,{type:"iri",id:"property_iri",term:i.property_iri,"onUpdate:term":e[19]||(e[19]=a=>i.property_iri=a)},null,8,["term"])])]),r("div",oi,[ni,r("div",null,[P(d,{type:"iri",id:"property_iri",term:i.property_iri,"onUpdate:term":e[20]||(e[20]=a=>i.property_iri=a)},null,8,["term"])])]),r("div",ii,[si,r("div",null,[P(d,{type:"literal",id:"property_label",term:i.property_label,"onUpdate:term":e[21]||(e[21]=a=>i.property_label=a)},null,8,["term"])])]),r("div",ri,[li,r("div",null,[P(d,{type:"literal",id:"property_cartinality",term:t.property_cartinality,"onUpdate:term":e[22]||(e[22]=a=>t.property_cartinality=a)},null,8,["term"])])])])]),r("div",ai,[r("button",{type:"button",class:"btn btn-secondary",onClick:e[23]||(e[23]=a=>t.configure_property.hide())},"Close"),r("button",{type:"button",class:"btn btn-primary",onClick:e[24]||(e[24]=a=>t.editProp())},"Save changes")])])],512)],64)}const pi=Zt(Yo,[["render",di]]);export{pi as default};
